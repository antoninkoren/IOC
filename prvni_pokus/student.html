<link rel="stylesheet" href="style.css">
<div class="card">
  <h2 id="name"></h2>
  <p>ÄŒas: <span id="time">0</span> s</p>
</div>

<script src="firebase.js"></script>
<script>
  if (localStorage.getItem("role") !== "student") location.href="index.html";

  const name = localStorage.getItem("name");
  document.getElementById("name").innerText = name;

  let time = 0;

  setInterval(() => {
    time++;
    timeEl.innerText = time;

    navigator.geolocation.getCurrentPosition(pos => {
      db.ref("students/" + name).set({
        time,
        lat: pos.coords.latitude,
        lon: pos.coords.longitude,
        updated: Date.now()
      });
    });
  }, 3000);
</script>
